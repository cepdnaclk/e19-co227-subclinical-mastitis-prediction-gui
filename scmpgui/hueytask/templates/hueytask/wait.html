{% extends "base.html" %}

{% block page_content %}
<div class="container">
    <div class="row justify-content-center align-items-center" style="height: 100vh;">
        <!-- Added style for full-height container -->
        <div class="col-md-6 d-flex flex-column justify-content-center align-items-center">
            <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <h1 class="mt-3">Please wait....</h1>
        </div>
    </div>
</div>

{% endblock page_content %}

{% block script_content %}
<script>
    function checkTaskStatus() {
        $.ajax({
            url: "{% url 'check_task_status' %}", // Replace with the URL of your status-checking view
            type: 'GET',
            dataType: 'json',
            success: function(response) {
                if (response.status === 'task_complete') {
                    // Redirect to the result page or display the output
                    console.log("Success...");
                    window.location.href = "https://www.google.com/";   // On success goto
                } else {
                    // Task is still running, continue checking
                    console.log("Timeout...");
                    setTimeout(checkTaskStatus, 1000); // Check every second
                }
            }
        });
    }

    $(document).ready(function() {
        // Start checking the task status when the page loads
        checkTaskStatus();
    });
</script>
{% endblock script_content %}